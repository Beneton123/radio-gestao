<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel de Manuten√ß√£o - RadioScan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .detalhes-pedido { background-color: #f0f8ff; margin-top: -1px; border-bottom: 1px solid #dee2e6; border-left: 1px solid #dee2e2; border-right: 1px solid #dee2e6; }
        .detalhes-pedido td div { padding: 15px; }
        .table-pedidos th, .table-pedidos td { vertical-align: middle; }
        .nav-tabs .nav-link { color: #495057; }
        .nav-tabs .nav-link.active { color: var(--cor-primaria, #880202); border-color: #dee2e6 #dee2e6 var(--cor-primaria, #880202); font-weight: bold; }
        .detalhes-pedido .row.bg-light { background-color: #e9ecef !important; }
        .radio-concluido { background-color: #d1e7dd !important; }
        .radio-condenado { background-color: #e2e3e5 !important; text-decoration: line-through; opacity: 0.7; }
        .radio-transferido { background-color: #fff3cd !important; opacity: 0.8; }
    </style>
</head>
<body class="bg-light">
     <div class="sidebar" id="sidebar">
        <img src="https://www.radioscan.com.br/cliente_files/img/empresa/banner-empresa-06.jpg" alt="Logo" class="logo" style="height: 67.5px; width: 100%;">
        <a href="index.html" class="active">üè† In√≠cio</a>
        
        <a href="registrar.html">‚ûï Cadastrar R√°dio</a>
        <a href="excluir.html">‚ùå Excluir R√°dio</a>
        <a href="estoque.html">üì¶ Estoque</a>
        
        <a href="solicitar_manutencao.html">üì§ Solicitar Manuten√ß√£o</a>
        <a href="manutencao_dashboard.html">üîß Manuten√ß√£o</a> 
        
        <a href="saida.html">üì§ Saida de Loca√ß√£o</a>
        <a href="entrada.html">üì• Retorno de Loca√ß√£o</a>
       

        <a href="gerenciar-nf.html">üßæ Gerenciar Loca√ß√£o</a>

        <a href="historico.html">üìö Hist√≥rico de R√°dio</a>

        <a href="admin.html">‚öôÔ∏è Painel Admin</a>

        <a href="#" id="logout-link">üö™ Sair</a>
    </div>

    <div class="content">
        <h2 class="mb-4" style="color: var(--cor-primaria, #880202);">Painel de Gerenciamento de Manuten√ß√£o</h2>

        <ul class="nav nav-tabs mb-3" id="manutencaoTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pedidos-abertos-tab" data-bs-toggle="tab" data-bs-target="#pedidos-abertos-pane" type="button" role="tab" aria-controls="pedidos-abertos-pane" aria-selected="true">Pedidos Abertos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pedidos-andamento-tab" data-bs-toggle="tab" data-bs-target="#pedidos-andamento-pane" type="button" role="tab" aria-controls="pedidos-andamento-pane" aria-selected="false">Em Andamento/Aguardando</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="estoque-manutencao-tab" data-bs-toggle="tab" data-bs-target="#estoque-manutencao-pane" type="button" role="tab" aria-controls="estoque-manutencao-pane" aria-selected="false">Estoque de Manuten√ß√£o</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="historico-manutencao-tab" data-bs-toggle="tab" data-bs-target="#historico-manutencao-pane" type="button" role="tab" aria-controls="historico-manutencao-pane" aria-selected="false">Hist√≥rico de Manuten√ß√£o</button>
            </li>
        </ul>

        <div class="tab-content" id="manutencaoTabContent">
            <div class="tab-pane fade show active" id="pedidos-abertos-pane" role="tabpanel" aria-labelledby="pedidos-abertos-tab" tabindex="0">
                <div class="main-card">
                    <div class="card-title-embedded">SOLICITA√á√ïES DE MANUTEN√á√ÉO ABERTAS</div>
                    <div class="table-responsive pt-3">
                        <table class="table table-hover table-pedidos" id="tabelaPedidosAbertos">
                            <thead>
                                <tr>
                                    <th>ID Pedido</th>
                                    <th>Solicitante</th>
                                    <th>Data Solicita√ß√£o</th>
                                    <th>Prioridade</th>
                                    <th>Qtd. R√°dios</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pedidos-andamento-pane" role="tabpanel" aria-labelledby="pedidos-andamento-tab" tabindex="0">
                <div class="main-card">
                    <div class="card-title-embedded">PEDIDOS AGUARDANDO OU EM MANUTEN√á√ÉO</div>
                    <div class="pt-3">
                        <div class="row mb-3"><div class="col-md-6"><input type="text" id="filtroPedidosEmAndamento" class="form-control" placeholder="Buscar por ID Pedido, Solicitante, T√©cnico..."></div></div>
                    </div>
                    <div class="table-responsive pt-3">
                        <table class="table table-hover table-pedidos" id="tabelaPedidosEmAndamento">
                            <thead><tr><th>ID Pedido</th><th>Solicitante</th><th>Data Solicita√ß√£o</th><th>Status Pedido</th><th>T√©cnico</th><th>A√ß√µes</th></tr></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="estoque-manutencao-pane" role="tabpanel" aria-labelledby="estoque-manutencao-tab" tabindex="0">
                <div class="main-card">
                    <div class="card-title-embedded">ESTOQUE DE R√ÅDIOS EM MANUTEN√á√ÉO</div>
                    <div class="pt-3">
                        <div class="row mb-3"><div class="col-md-6"><input type="text" id="filtroEstoqueManutencao" class="form-control" placeholder="Buscar por N¬∫ S√©rie, Modelo, ID Pedido..."></div></div>
                        <div class="table-responsive"><table class="table table-bordered table-hover" id="tabelaEstoqueManutencao"><thead><tr><th>ID Ordem de Servi√ßo</th><th>Modelo</th><th>Frequ√™ncia</th><th>N¬∫ de S√©rie</th><th>T√©cnico Respons√°vel</th><th>Status</th></tr></thead><tbody></tbody></table></div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="historico-manutencao-pane" role="tabpanel" aria-labelledby="historico-manutencao-tab" tabindex="0">
                <div class="main-card">
                    <div class="card-title-embedded">HIST√ìRICO DE MANUTEN√á√ïES CONCLU√çDAS</div>
                    <div class="pt-3">
                        <div class="row mb-3"><div class="col-md-6"><input type="text" id="filtroHistoricoManutencao" class="form-control" placeholder="Buscar por ID Pedido, N¬∫ S√©rie, Solicitante, T√©cnico..."></div></div>
                        <div class="table-responsive"><table class="table table-hover table-pedidos" id="tabelaHistoricoManutencao"><thead><tr><th>ID Pedido</th><th>Solicitante</th><th>Data Conclus√£o</th><th>T√©cnico</th><th>Qtd. R√°dios</th><th>A√ß√µes</th></tr></thead><tbody></tbody></table></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="customAlertModal" tabindex="-1" aria-labelledby="customAlertModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-custom-danger" id="customAlertModalHeader"> <h5 class="modal-title text-white" id="customAlertModalLabel">Aten√ß√£o!</h5> <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button></div><div class="modal-body"><p id="customAlertMessage"></p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button></div></div></div>
    </div>

    <div class="modal fade" id="modalSelecionarTecnico" tabindex="-1" aria-labelledby="modalSelecionarTecnicoLabel" aria-hidden="true">
        <div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-custom-danger text-white"> <h5 class="modal-title" id="modalSelecionarTecnicoLabel">Iniciar Manuten√ß√£o - Selecionar T√©cnico</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><input type="hidden" id="idPedidoParaIniciarManutencao"><div class="mb-3"><label for="selectTecnico" class="form-label">T√©cnico Respons√°vel:</label><select class="form-select" id="selectTecnico" required><option value="" selected disabled>Selecione um t√©cnico...</option><option value="Robson">Robson</option><option value="Gabriel">Gabriel</option><option value="Outro">Outro (especificar)</option></select></div><div class="mb-3" id="divNomeOutroTecnico" style="display:none;"><label for="inputNomeOutroTecnico" class="form-label">Nome do T√©cnico (se "Outro"):</label><input type="text" class="form-control" id="inputNomeOutroTecnico" placeholder="Digite o nome do t√©cnico"></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-primary" id="btnConfirmarIniciarManutencaoComTecnico">Confirmar In√≠cio</button></div></div></div>
    </div>

    <div class="modal fade" id="modalInputObservacoesTecnicas" tabindex="-1" aria-labelledby="modalInputObservacoesTecnicasLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-custom-danger text-white"> <h5 class="modal-title" id="modalInputObservacoesTecnicasLabel">Concluir Manuten√ß√£o da OS</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button></div><div class="modal-body"><p>Adicione observa√ß√µes t√©cnicas para a conclus√£o de toda a OS (opcional):</p><textarea class="form-control" id="inputObservacoesTecnicas" rows="3" placeholder="Ex: Todos os reparos foram finalizados..."></textarea><input type="hidden" id="idPedidoParaConcluirManutencao"></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-primary" id="btnConfirmarInputObservacoesTecnicas">Concluir OS</button></div></div></div>
    </div>

    <div class="modal fade" id="modalConfirmation" tabindex="-1" aria-labelledby="modalConfirmationLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-custom-danger text-white"> <h5 class="modal-title" id="modalConfirmationLabel">Confirma√ß√£o</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button></div><div class="modal-body"><p id="modalConfirmationMessage"></p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-danger" id="btnConfirmAction">Confirmar</button></div></div></div>
    </div>
    
    <div class="modal fade" id="modalDarBaixa" tabindex="-1" aria-labelledby="modalDarBaixaLabel" aria-hidden="true"></div>

    <div class="modal fade" id="modalCondenarRadio" tabindex="-1" aria-labelledby="modalCondenarRadioLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-custom-danger text-white"><h5 class="modal-title" id="modalCondenarRadioLabel">Condenar R√°dio</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button></div><div class="modal-body"><p>Voc√™ est√° prestes a condenar o r√°dio <strong id="radioParaCondenarInfo"></strong>. Esta a√ß√£o √© permanente e ir√° mov√™-lo para o hist√≥rico de baixados.</p><div class="mb-3"><label for="motivoCondenacao" class="form-label">Motivo da Condena√ß√£o (obrigat√≥rio):</label><textarea class="form-control" id="motivoCondenacao" rows="3" placeholder="Ex: Dano irrepar√°vel na placa principal..."></textarea></div><input type="hidden" id="idPedidoParaCondenar"><input type="hidden" id="radioSubIdParaCondenar"></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-danger" id="btnConfirmarCondenacao">Confirmar Condena√ß√£o</button></div></div></div>
    </div>

    <div class="modal fade" id="modalTransferirRadio" tabindex="-1" aria-labelledby="modalTransferirRadioLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-custom-danger text-white"><h5 class="modal-title" id="modalTransferirRadioLabel">Transferir R√°dio</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button></div><div class="modal-body"><p>Transferindo o r√°dio <strong id="radioParaTransferirInfo"></strong> da OS <strong id="osOrigemParaTransferirInfo"></strong>.</p><input type="hidden" id="idPedidoOrigemParaTransferencia"><input type="hidden" id="radioSubIdParaTransferencia"><div class="mb-3"><label class="form-label">Destino da Transfer√™ncia:</label><div class="form-check"><input class="form-check-input" type="radio" name="tipoDestino" id="destinoNovaOS" value="nova" checked><label class="form-check-label" for="destinoNovaOS">Criar uma nova OS</label></div><div class="form-check"><input class="form-check-input" type="radio" name="tipoDestino" id="destinoOsExistente" value="existente"><label class="form-check-label" for="destinoOsExistente">Transferir para OS existente</label></div></div><div class="mb-3" id="campoOsExistente" style="display: none;"><label for="idPedidoExistente" class="form-label">ID da OS de Destino:</label><input type="text" class="form-control" id="idPedidoExistente" placeholder="Digite o ID da OS (Ex: PE000123)"></div><div class="mb-3"><label for="novaPrioridade" class="form-label">Prioridade:</label><select id="novaPrioridade" class="form-select"><option value="baixa">Baixa</option><option value="media" selected>M√©dia</option><option value="alta">Alta</option><option value="urgente">Urgente</option></select></div><div class="mb-3"><label for="novoProblema" class="form-label">Novo Problema / Motivo (obrigat√≥rio):</label><textarea class="form-control" id="novoProblema" rows="3" placeholder="Descreva o problema ou o motivo..."></textarea></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-primary" id="btnConfirmarTransferencia">Confirmar Transfer√™ncia</button></div></div></div>
    </div>
    
    <div class="modal fade" id="modalInserirOS" tabindex="-1" aria-labelledby="modalInserirOSLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered"><div class="modal-content"><form id="formDarAndamento"><div class="modal-header bg-custom-danger text-white"><h5 class="modal-title" id="modalInserirOSLabel">Dar Andamento - Inserir OS</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p>Voc√™ pode inserir uma OS manualmente ou gerar uma automaticamente.</p><input type="hidden" id="idPedidoParaDarAndamento"><div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" role="switch" id="checkOsAutomatica"><label class="form-check-label" for="checkOsAutomatica">Gerar OS Autom√°tica </label></div><div class="mb-3" id="campoOsManual"><label for="inputNumeroOS" class="form-label">N√∫mero da Ordem de Servi√ßo (OS):</label><input type="text" class="form-control" id="inputNumeroOS" placeholder="Digite o n√∫mero da OS" required></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button type="submit" class="btn btn-primary" id="btnConfirmarDarAndamento">Confirmar</button></div></form></div></div>
    </div>

    <div class="modal fade" id="modalDecisaoPosManutencao" tabindex="-1" aria-labelledby="modalDecisaoLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-custom-danger text-white">
                    <h5 class="modal-title" id="modalDecisaoLabel">A√ß√£o Necess√°ria - Manuten√ß√£o Conclu√≠da</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="idPedidoParaDecisao">
                    <p>A manuten√ß√£o para a OS <strong id="decisaoIdPedido"></strong> foi conclu√≠da.</p>
                    <div class="alert alert-info">
                        <p class="mb-1">Este r√°dio pertence originalmente √† <strong>NF de Sa√≠da <span id="decisaoOrigemNf" class="fw-bold"></span></strong> do cliente <strong id="decisaoClienteNome"></strong>.</p>
                    </div>
                    <p class="fw-bold">Qual o destino do r√°dio consertado?</p>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-success" id="btnDecisaoVoltarParaNf">
                        <i class="bi bi-box-arrow-up-right"></i> Voltar para a NF do Cliente
                    </button>
                    <button type="button" class="btn btn-primary" id="btnDecisaoVoltarParaEstoque">
                        <i class="bi bi-box-seam"></i> Mover para o Estoque
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/manutencao_dashboard.js"></script>
</body>
</html>